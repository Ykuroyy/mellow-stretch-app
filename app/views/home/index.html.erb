<div class="container">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <div class="header">
    <h1 class="app-title">æœã‚¹ãƒˆãƒ¬ãƒƒãƒãƒ»ç¾å‘¼å¸</h1>
    <p class="subtitle">ä»Šæ—¥ã®ã‚ãªãŸã«ã´ã£ãŸã‚Šã®ç™’ã—æ™‚é–“</p>
  </div>

  <!-- æ—¥ä»˜è¡¨ç¤º -->
  <div class="date-display">
    <div class="date-text">
      <%= @today.strftime("%Yå¹´%mæœˆ%dæ—¥") %> (<%= %w[æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ][@today.wday] %>)
    </div>
  </div>

  <!-- ä»Šæ—¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒ -->
  <div class="content-card">
    <div class="card-header">
      <div class="card-icon stretch-icon">ğŸ§˜â€â™€ï¸</div>
      <div>
        <h2 class="card-title">ä»Šæ—¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒ</h2>
        <div class="card-subtitle"><%= @stretch.category %></div>
      </div>
    </div>
    <div class="card-content">
      <h3><%= @stretch.name %></h3>
      <p><%= @stretch.description %></p>
      <div class="duration-badge">ç´„<%= @stretch.duration %>åˆ†</div>
      <span class="category-badge"><%= @stretch.difficulty %></span>
      
      <!-- å®Ÿç¸¾ãƒœã‚¿ãƒ³ -->
      <div class="achievement-section">
        <% if @today_achievements[:stretch] %>
          <div class="achievement-completed">
            <span class="achievement-icon">âœ…</span>
            <span class="achievement-text">ã‚¹ãƒˆãƒ¬ãƒƒãƒå®Œäº†ï¼</span>
            <div class="achievement-buttons">
              <button class="reset-achievement-button stretch-reset-button" data-activity-type="stretch">
                <span class="button-icon">ğŸ”„</span>
                <span class="button-text">ã‚„ã‚Šç›´ã™</span>
              </button>
              <button class="try-another-button stretch-try-another" data-stretch-id="<%= @stretch.id %>">
                <span class="button-icon">ğŸ”„</span>
                <span class="button-text">åˆ¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚‚è©¦ã™</span>
              </button>
            </div>
          </div>
        <% else %>
          <div class="achievement-buttons">
            <button class="achievement-button stretch-button" data-activity-type="stretch">
              <span class="button-icon">ğŸ§˜â€â™€ï¸</span>
              <span class="button-text">ã‚¹ãƒˆãƒ¬ãƒƒãƒã—ãŸã‚ˆ</span>
            </button>
            
            <button class="try-another-button stretch-try-another" data-stretch-id="<%= @stretch.id %>">
              <span class="button-icon">ğŸ”„</span>
              <span class="button-text">åˆ¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚‚è©¦ã™</span>
            </button>
          </div>
        <% end %>
      </div>
    </div>
  </div>

  <!-- ä»Šæ—¥ã®å‘¼å¸æ³• -->
  <div class="content-card">
    <div class="card-header">
      <div class="card-icon breathing-icon">ğŸ’¨</div>
      <div>
        <h2 class="card-title">ä»Šæ—¥ã®å‘¼å¸æ³•</h2>
        <div class="card-subtitle"><%= @breathing.benefit %></div>
      </div>
    </div>
    <div class="card-content">
      <h3><%= @breathing.name %></h3>
      <p><%= @breathing.description %></p>
      <div class="duration-badge">ç´„<%= @breathing.duration %>åˆ†</div>
      <span class="category-badge"><%= @breathing.technique %></span>
      
      <!-- å®Ÿç¸¾ãƒœã‚¿ãƒ³ -->
      <div class="achievement-section">
        <% if @today_achievements[:breathing] %>
          <div class="achievement-completed">
            <span class="achievement-icon">âœ…</span>
            <span class="achievement-text">å‘¼å¸æ³•å®Œäº†ï¼</span>
            <div class="achievement-buttons">
              <button class="reset-achievement-button breathing-reset-button" data-activity-type="breathing">
                <span class="button-icon">ğŸ”„</span>
                <span class="button-text">ã‚„ã‚Šç›´ã™</span>
              </button>
              <button class="try-another-button breathing-try-another" data-breathing-id="<%= @breathing.id %>">
                <span class="button-icon">ğŸ”„</span>
                <span class="button-text">åˆ¥ã®å‘¼å¸æ³•ã‚‚è©¦ã™</span>
              </button>
            </div>
          </div>
        <% else %>
          <div class="achievement-buttons">
            <button class="achievement-button breathing-button" data-activity-type="breathing">
              <span class="button-icon">ğŸ’¨</span>
              <span class="button-text">å‘¼å¸ã—ãŸã‚ˆ</span>
            </button>
            
            <button class="try-another-button breathing-try-another" data-breathing-id="<%= @breathing.id %>">
              <span class="button-icon">ğŸ”„</span>
              <span class="button-text">åˆ¥ã®å‘¼å¸æ³•ã‚‚è©¦ã™</span>
            </button>
          </div>
        <% end %>
      </div>
    </div>
  </div>



  <!-- éå»ã®å±¥æ­´ï¼ˆ3æ—¥åˆ†ï¼‰ -->
  <% if @recent_activities.any? %>
    <div class="content-card">
      <div class="card-header">
        <div class="card-icon">ğŸ“…</div>
        <div>
          <h2 class="card-title">æœ€è¿‘ã®æ´»å‹•</h2>
          <div class="card-subtitle">éå»3æ—¥åˆ†ã®è¨˜éŒ²</div>
        </div>
        <%= link_to activities_history_path, class: "header-link" do %>
          ğŸ“… éå»10æ—¥åˆ†ã®è©³ç´°ã‚’è¦‹ã‚‹ â†’
        <% end %>
      </div>
      <div class="card-content">
        <% @recent_activities.group_by(&:date).first(3).each do |date, activities| %>
          <div class="history-day">
            <div class="history-date">
              <%= date.strftime("%mæœˆ%dæ—¥") %> (<%= %w[æ—¥ æœˆ ç« æ°´ æœ¨ é‡‘ åœŸ][date.wday] %>)
            </div>
            <% activities.each do |activity| %>
              <div class="history-item">
                <div class="history-icon"><%= activity.activity_icon %></div>
                <div class="history-content">
                  <div class="history-name"><%= activity.activity_name %></div>
                  <div class="history-category"><%= activity.activity_category %></div>
                </div>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% else %>
    <!-- å±¥æ­´ãŒãªã„å ´åˆã®æ¡ˆå†… -->
    <div class="content-card">
      <div class="card-header">
        <div class="card-icon">ğŸŒ¸</div>
        <div>
          <h2 class="card-title">ä»Šæ—¥ã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†</h2>
          <div class="card-subtitle">ã¾ã æ´»å‹•è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</div>
        </div>
        <%= link_to activities_history_path, class: "header-link" do %>
          ğŸ“… éå»10æ—¥åˆ†ã®è©³ç´°ã‚’è¦‹ã‚‹ â†’
        <% end %>
      </div>
      <div class="card-content">
        <div class="empty-state">
          <div class="empty-icon">ğŸ’</div>
          <div class="empty-text">ç¾ã—ã„ç¿’æ…£ã‚’å§‹ã‚ã‚‹æº–å‚™ãŒã§ãã¾ã—ãŸ</div>
          <div class="empty-subtext">ä¸Šã®ã‚¹ãƒˆãƒ¬ãƒƒãƒã¨å‘¼å¸æ³•ã‹ã‚‰å§‹ã‚ã¦ã¿ã¾ã—ã‚‡ã†ï¼</div>
        </div>
      </div>
    </div>
  <% end %>

  <!-- 1ãƒ¶æœˆã®æ´»å‹•è¨˜éŒ²ãƒœã‚¿ãƒ³ -->
  <div class="monthly-button-container">
    <%= link_to activities_monthly_path, class: "monthly-button" do %>
      <div class="monthly-button-content">
        <div class="monthly-button-icon">ğŸ“Š</div>
        <div class="monthly-button-text">
          <div class="monthly-button-title">1ãƒ¶æœˆã®æ´»å‹•è¨˜éŒ²</div>
          <div class="monthly-button-subtitle">éå»30æ—¥é–“ã®ç¶™ç¶šçŠ¶æ³</div>
        </div>
        <div class="monthly-button-arrow">â†’</div>
      </div>
    <% end %>
  </div>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <div class="footer">
    <div class="footer-text">
      ğŸŒ¸ æ¯æœ5åˆ†ã§ã€ç¾ã—ã„ç¿’æ…£ã‚’å§‹ã‚ã¾ã—ã‚‡ã† ğŸŒ¸
    </div>
    <div class="footer-text">
      ã‚ãªãŸã®ãƒšãƒ¼ã‚¹ã§ã€ç„¡ç†ã›ãšç¶šã‘ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™
    </div>
    <div class="social-links">
      <a href="#" class="social-link">ğŸ’•</a>
      <a href="#" class="social-link">ğŸŒ¸</a>
      <a href="#" class="social-link">âœ¨</a>
    </div>
    
    <!-- è¨­å®šãƒœã‚¿ãƒ³ -->
    <div class="settings-section">
      <%= link_to settings_path, class: "settings-button" do %>
        <span class="settings-icon">âš™ï¸</span>
        <span class="settings-text">è¨­å®š</span>
      <% end %>
      

    </div>
  </div>
</div>

<script>
  // ã‚·ãƒ³ãƒ—ãƒ«ãªåˆæœŸåŒ–
  document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, setting up event listeners');
    setupEventListeners();
  });
  
  // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
  function setupEventListeners() {
    console.log('Setting up event listeners...');
    
    // æ—¢å­˜ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’å‰Šé™¤
    document.removeEventListener('click', handleGlobalClick);
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
    document.addEventListener('click', handleGlobalClick);
    
    console.log('Event listeners setup completed');
  }
  
  // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  function handleGlobalClick(event) {
    const target = event.target.closest('button');
    if (!target) return;
    
    console.log('Button clicked:', target.className, target.textContent.trim());
    
    if (target.classList.contains('achievement-button')) {
      event.preventDefault();
      event.stopPropagation();
      console.log('Achievement button clicked');
      handleAchievementClick(target);
    } else if (target.classList.contains('reset-achievement-button')) {
      event.preventDefault();
      event.stopPropagation();
      console.log('Reset button clicked');
      handleResetAchievement(target);
    } else if (target.classList.contains('try-another-button')) {
      event.preventDefault();
      event.stopPropagation();
      console.log('Try another button clicked');
      handleTryAnother(target);
    }
  }
  
  // CSRFãƒˆãƒ¼ã‚¯ãƒ³å–å¾—é–¢æ•°
  function getCSRFToken() {
    const token = document.querySelector('meta[name="csrf-token"]');
    return token ? token.getAttribute('content') : null;
  }
  
  // å®Ÿç¸¾ãƒœã‚¿ãƒ³ã®å‡¦ç†é–¢æ•°
  function handleAchievementClick(button) {
    console.log('handleAchievementClick called with button:', button);
    
    const activityType = button.getAttribute('data-activity-type');
    const achievementSection = button.closest('.achievement-section');
    const tryAnotherButton = achievementSection.querySelector(`.${activityType}-try-another`);
    const currentId = tryAnotherButton?.getAttribute(`data-${activityType}-id`);
    
    console.log('Activity Type:', activityType);
    console.log('Current ID:', currentId);
    
    if (!activityType) {
      console.error('Activity type not found on button');
      showNotification('ãƒœã‚¿ãƒ³ã®è¨­å®šã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚', 'error');
      return;
    }
    
    // CSRFãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
    const csrfToken = getCSRFToken();
    if (!csrfToken) {
      console.error('CSRF token not found');
      showNotification('ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚', 'error');
      return;
    }
    
    // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
    button.disabled = true;
    button.style.opacity = '0.6';
    
    console.log('Sending fetch request to /home/record_achievement');
    
    // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦é€ä¿¡
    const formData = new FormData();
    formData.append('activity_type', activityType);
    if (currentId) {
      formData.append('activity_id', currentId);
    }
    
    fetch('/home/record_achievement', {
      method: 'POST',
      headers: {
        'X-CSRF-Token': csrfToken,
        'Accept': 'application/json'
      },
      body: formData
    })
        .then(response => {
          console.log('Response status:', response.status);
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          console.log('Response data:', data);
          if (data.success) {
            // æˆåŠŸæ™‚ã®å‡¦ç†
            achievementSection.innerHTML = `
              <div class="achievement-completed">
                <span class="achievement-icon">âœ…</span>
                <span class="achievement-text">${activityType === 'stretch' ? 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ' : 'å‘¼å¸æ³•'}å®Œäº†ï¼</span>
                <div class="achievement-buttons">
                  <button class="reset-achievement-button ${activityType}-reset-button" data-activity-type="${activityType}">
                    <span class="button-icon">ğŸ”„</span>
                    <span class="button-text">ã‚„ã‚Šç›´ã™</span>
                  </button>
                  <button class="try-another-button ${activityType}-try-another" data-${activityType}-id="${currentId}">
                    <span class="button-icon">ğŸ”„</span>
                    <span class="button-text">åˆ¥ã®${activityType === 'stretch' ? 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ' : 'å‘¼å¸æ³•'}ã‚‚è©¦ã™</span>
                  </button>
                </div>
              </div>
            `;
            
            // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            showNotification(data.message, 'success');
            
            // å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            if (data.encouragement_message) {
              setTimeout(() => {
                showEncouragementModal(data.encouragement_message, activityType);
              }, 1000);
            }
          }
        })
        .catch(error => {
          console.error('Fetch Error:', error);
          button.disabled = false;
          button.style.opacity = '1';
          showNotification('é€šä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚', 'error');
        });
    } catch (error) {
      console.error('JavaScript Error:', error);
      button.disabled = false;
      button.style.opacity = '1';
      showNotification('JavaScriptã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚', 'error');
    }
  }
  
  // ã‚„ã‚Šç›´ã—æ©Ÿèƒ½
  function handleResetAchievement(button) {
    const activityType = button.getAttribute('data-activity-type');
    const achievementSection = button.closest('.achievement-section');
    const tryAnotherButton = achievementSection.querySelector(`.${activityType}-try-another`);
    const currentId = tryAnotherButton?.getAttribute(`data-${activityType}-id`);
    
    // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
    button.disabled = true;
    button.style.opacity = '0.6';
    
    // CSRFãƒˆãƒ¼ã‚¯ãƒ³ã®å–å¾—
    const csrfToken = getCSRFToken();
    if (!csrfToken) {
      console.error('CSRF token not found');
      showNotification('ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚', 'error');
      return;
    }
    
    // ãƒ•ã‚©ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦é€ä¿¡ï¼ˆã‚ˆã‚Šç¢ºå®Ÿï¼‰
    const formData = new FormData();
    formData.append('activity_type', activityType);
    if (currentId) {
      formData.append('activity_id', currentId);
    }
    
    fetch('/home/reset_achievement', {
      method: 'POST',
      headers: {
        'X-CSRF-Token': csrfToken,
        'Accept': 'application/json'
      },
      body: formData
    })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // æˆåŠŸæ™‚ã®å‡¦ç†
          achievementSection.innerHTML = `
            <div class="achievement-buttons">
              <button class="achievement-button ${activityType}-button" data-activity-type="${activityType}">
                <span class="button-icon">${activityType === 'stretch' ? 'ğŸ§˜â€â™€ï¸' : 'ğŸ’¨'}</span>
                <span class="button-text">${activityType === 'stretch' ? 'ã‚¹ãƒˆãƒ¬ãƒƒãƒã—ãŸã‚ˆ' : 'å‘¼å¸ã—ãŸã‚ˆ'}</span>
              </button>
              <button class="try-another-button ${activityType}-try-another" data-${activityType}-id="${currentId}">
                <span class="button-icon">ğŸ”„</span>
                <span class="button-text">åˆ¥ã®${activityType === 'stretch' ? 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ' : 'å‘¼å¸æ³•'}ã‚‚è©¦ã™</span>
              </button>
            </div>
          `;
          
          // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
          showNotification(data.message, 'success');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        button.disabled = false;
        button.style.opacity = '1';
        showNotification('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚', 'error');
      });
  }
  
  // åˆ¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒãƒ»å‘¼å¸æ³•ã‚’è©¦ã™æ©Ÿèƒ½
  function handleTryAnother(button) {
    const isStretch = button.classList.contains('stretch-try-another');
    const currentId = button.getAttribute(isStretch ? 'data-stretch-id' : 'data-breathing-id');
    const endpoint = isStretch ? '/home/get_another_stretch' : '/home/get_another_breathing';
    
    console.log('handleTryAnother called:', { isStretch, currentId, endpoint });
    
    // ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
    button.disabled = true;
    button.style.opacity = '0.6';
    
    fetch(`${endpoint}?current_id=${currentId}`, {
      method: 'GET',
      headers: {
        'Accept': 'application/json'
      }
    })
    .then(response => response.json())
    .then(data => {
      if (data.success) {
        // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ›´æ–°
        const card = button.closest('.content-card');
        const cardContent = card.querySelector('.card-content');
        
        if (isStretch) {
          // ã‚¹ãƒˆãƒ¬ãƒƒãƒã®å†…å®¹ã‚’æ›´æ–°
          const stretch = data.stretch;
          cardContent.innerHTML = `
            <h3>${stretch.name}</h3>
            <p>${stretch.description}</p>
            <div class="duration-badge">ç´„${stretch.duration}åˆ†</div>
            <span class="category-badge">${stretch.difficulty}</span>
            
            <!-- å®Ÿç¸¾ãƒœã‚¿ãƒ³ -->
            <div class="achievement-section">
              <div class="achievement-buttons">
                <button class="achievement-button stretch-button" data-activity-type="stretch">
                  <span class="button-icon">ğŸ§˜â€â™€ï¸</span>
                  <span class="button-text">ã‚¹ãƒˆãƒ¬ãƒƒãƒã—ãŸã‚ˆ</span>
                </button>
                <button class="try-another-button stretch-try-another" data-stretch-id="${stretch.id}">
                  <span class="button-icon">ğŸ”„</span>
                  <span class="button-text">åˆ¥ã®ã‚¹ãƒˆãƒ¬ãƒƒãƒã‚‚è©¦ã™</span>
                </button>
              </div>
            </div>
          `;
        } else {
          // å‘¼å¸æ³•ã®å†…å®¹ã‚’æ›´æ–°
          const breathing = data.breathing;
          cardContent.innerHTML = `
            <h3>${breathing.name}</h3>
            <p>${breathing.description}</p>
            <div class="duration-badge">ç´„${breathing.duration}åˆ†</div>
            <span class="category-badge">${breathing.technique}</span>
            
            <!-- å®Ÿç¸¾ãƒœã‚¿ãƒ³ -->
            <div class="achievement-section">
              <div class="achievement-buttons">
                <button class="achievement-button breathing-button" data-activity-type="breathing">
                  <span class="button-icon">ğŸ’¨</span>
                  <span class="button-text">å‘¼å¸ã—ãŸã‚ˆ</span>
                </button>
                <button class="try-another-button breathing-try-another" data-breathing-id="${breathing.id}">
                  <span class="button-icon">ğŸ”„</span>
                  <span class="button-text">åˆ¥ã®å‘¼å¸æ³•ã‚‚è©¦ã™</span>
                </button>
              </div>
            </div>
          `;
        }
        
        // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
        showNotification(`æ–°ã—ã„${isStretch ? 'ã‚¹ãƒˆãƒ¬ãƒƒãƒ' : 'å‘¼å¸æ³•'}ã‚’è¡¨ç¤ºã—ã¾ã—ãŸï¼`, 'success');
      }
    })
    .catch(error => {
      console.error('Error:', error);
      button.disabled = false;
      button.style.opacity = '1';
      showNotification('ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚', 'error');
    });
  }
  
  // é€šçŸ¥è¡¨ç¤ºé–¢æ•°
  function showNotification(message, type) {
    const notification = document.createElement('div');
    notification.className = `notification ${type}`;
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // 3ç§’å¾Œã«å‰Šé™¤
    setTimeout(() => {
      notification.remove();
    }, 3000);
  }
  

  
  // å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤ºé–¢æ•°
  function showEncouragementModal(message, activityType) {
    const modal = document.createElement('div');
    modal.className = 'encouragement-modal';
    modal.innerHTML = `
      <div class="encouragement-modal-content">
        <div class="encouragement-modal-header">
          <div class="encouragement-modal-icon">ğŸ’</div>
          <h3 class="encouragement-modal-title">ä»Šæ—¥ã®å¿œæ´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</h3>
        </div>
        <div class="encouragement-modal-body">
          <div class="encouragement-modal-message">${message}</div>
          <div class="encouragement-modal-time">${new Date().toLocaleString('ja-JP', { timeZone: 'Asia/Tokyo' })}</div>
        </div>
        <div class="encouragement-modal-footer">
          <button class="encouragement-modal-button" onclick="this.closest('.encouragement-modal').remove()">
            <span class="button-icon">ğŸ’•</span>
            <span class="button-text">ã‚ã‚ŠãŒã¨ã†ï¼</span>
          </button>
        </div>
      </div>
    `;
    
    document.body.appendChild(modal);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³åŠ¹æœ
    setTimeout(() => {
      modal.classList.add('show');
    }, 100);
  }
  

</script>
