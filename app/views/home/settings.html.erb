<div class="container">
  <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
  <div class="header">
    <h1 class="app-title">æœã‚¹ãƒˆãƒ¬ãƒƒãƒãƒ»ç¾å‘¼å¸</h1>
    <p class="subtitle">è¨­å®š</p>
  </div>

  <!-- è¨­å®šã‚«ãƒ¼ãƒ‰ -->
  <div class="content-card settings-card">
    <div class="card-header">
      <div class="card-icon settings-icon">âš™ï¸</div>
      <div>
        <h2 class="card-title">ã‚¢ãƒ—ãƒªè¨­å®š</h2>
        <div class="card-subtitle">ã‚ãªãŸå¥½ã¿ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º</div>
      </div>
    </div>
    <div class="card-content">
      
      <!-- ãƒ†ãƒ¼ãƒè¨­å®š -->
      <div class="setting-section">
        <h3 class="setting-title">ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼</h3>
        <div class="theme-options">
          <button class="theme-option active" data-theme="pink">
            <div class="theme-preview pink-theme"></div>
            <span class="theme-name">ãƒ”ãƒ³ã‚¯</span>
          </button>
          <button class="theme-option" data-theme="blue">
            <div class="theme-preview blue-theme"></div>
            <span class="theme-name">ãƒ–ãƒ«ãƒ¼</span>
          </button>
          <button class="theme-option" data-theme="green">
            <div class="theme-preview green-theme"></div>
            <span class="theme-name">ã‚°ãƒªãƒ¼ãƒ³</span>
          </button>
          <button class="theme-option" data-theme="purple">
            <div class="theme-preview purple-theme"></div>
            <span class="theme-name">ãƒ‘ãƒ¼ãƒ—ãƒ«</span>
          </button>
        </div>
      </div>

      <!-- ãƒ‡ãƒ¼ã‚¿ç®¡ç† -->
      <div class="setting-section">
        <h3 class="setting-title">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
        <div class="data-options">
          <%= link_to export_data_path, class: "data-button export-button" do %>
            <span class="button-icon">ğŸ“¤</span>
            <span class="button-text">ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
          <% end %>
          <button class="data-button reset-button" onclick="confirmReset()">
            <span class="button-icon">ğŸ”„</span>
            <span class="button-text">ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</span>
          </button>
        </div>
      </div>

    </div>
  </div>

  <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
  <div class="back-buttons">
    <%= link_to root_path, class: "back-link top-home" do %>
      <span class="back-icon">ğŸ </span>
      <span class="back-text">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</span>
    <% end %>
  </div>

  <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
  <div class="footer">
    <div class="footer-text">
      ğŸŒ¸ ã‚ãªãŸå¥½ã¿ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã€ã‚ˆã‚Šå¿«é©ã« ğŸŒ¸
    </div>
  </div>
</div>

<script>
  // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
  document.querySelectorAll('.theme-option').forEach(option => {
    option.addEventListener('click', function() {
      const theme = this.getAttribute('data-theme');
      document.querySelectorAll('.theme-option').forEach(opt => opt.classList.remove('active'));
      this.classList.add('active');
      applyTheme(theme);
      localStorage.setItem('selectedTheme', theme);
      
      // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
      showThemeChangeNotification(theme);
    });
  });

  function applyTheme(theme) {
    const root = document.documentElement;
    root.classList.remove('theme-pink', 'theme-blue', 'theme-green', 'theme-purple');
    root.classList.add(`theme-${theme}`);
    
    // ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆã‚’æ›´æ–°
    updateColorPalette(theme);
  }
  
  function updateColorPalette(theme) {
    const colors = {
      pink: { primary: '#FF69B4', secondary: '#FF1493', accent: '#87CEEB' },
      blue: { primary: '#4682B4', secondary: '#87CEEB', accent: '#FF69B4' },
      green: { primary: '#32CD32', secondary: '#90EE90', accent: '#FF69B4' },
      purple: { primary: '#9370DB', secondary: '#DDA0DD', accent: '#FF69B4' }
    };
    
    const color = colors[theme];
    const root = document.documentElement;
    root.style.setProperty('--primary-color', color.primary);
    root.style.setProperty('--secondary-color', color.secondary);
    root.style.setProperty('--accent-color', color.accent);
  }
  
  function showThemeChangeNotification(theme) {
    const themeNames = {
      pink: 'ãƒ”ãƒ³ã‚¯',
      blue: 'ãƒ–ãƒ«ãƒ¼', 
      green: 'ã‚°ãƒªãƒ¼ãƒ³',
      purple: 'ãƒ‘ãƒ¼ãƒ—ãƒ«'
    };
    
    const notification = document.createElement('div');
    notification.className = 'theme-notification';
    notification.innerHTML = `
      <div class="theme-notification-content">
        <span class="theme-notification-icon">ğŸ¨</span>
        <span class="theme-notification-text">ãƒ†ãƒ¼ãƒã‚’${themeNames[theme]}ã«å¤‰æ›´ã—ã¾ã—ãŸï¼</span>
      </div>
    `;
    
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.classList.add('show');
    }, 100);
    
    setTimeout(() => {
      notification.classList.remove('show');
      setTimeout(() => {
        notification.remove();
      }, 300);
    }, 2000);
  }

  function confirmReset() {
    if (confirm('æœ¬å½“ã«ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
      // POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã§ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = '/home/reset_data';
      
      // CSRFãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¿½åŠ 
      const csrfToken = document.querySelector('meta[name="csrf-token"]').getAttribute('content');
      const csrfInput = document.createElement('input');
      csrfInput.type = 'hidden';
      csrfInput.name = 'authenticity_token';
      csrfInput.value = csrfToken;
      form.appendChild(csrfInput);
      
      document.body.appendChild(form);
      form.submit();
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    const savedTheme = localStorage.getItem('selectedTheme') || 'pink';
    applyTheme(savedTheme);
    
    // ä¿å­˜ã•ã‚ŒãŸãƒ†ãƒ¼ãƒã®ãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«ã™ã‚‹
    document.querySelectorAll('.theme-option').forEach(option => {
      if (option.getAttribute('data-theme') === savedTheme) {
        option.classList.add('active');
      }
    });
  });
</script> 
</script> 